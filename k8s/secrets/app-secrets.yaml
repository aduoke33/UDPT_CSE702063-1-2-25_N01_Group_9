# =====================================================
# APPLICATION SECRETS
# Movie Booking System - Database Per Service Pattern
# =====================================================
#
# ⚠️  WARNING: Replace all CHANGE_ME values before deploying!
# ⚠️  In production, use external secret management:
#     - HashiCorp Vault (see vault-deployment.yaml)
#     - AWS Secrets Manager + ExternalSecrets (see external-secrets.yaml)
#     - Azure Key Vault / GCP Secret Manager
#
# For a clean example template, see: app-secrets.example.yaml
#
# =====================================================
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: movie-booking
  labels:
    app: movie-booking
type: Opaque
stringData:
  # Auth Service Database
  AUTH_DATABASE_URL: "postgresql+asyncpg://auth_user:CHANGE_ME_AUTH_PASSWORD@postgres-auth-service:5432/auth_db"
  
  # Movie Service Database
  MOVIE_DATABASE_URL: "postgresql+asyncpg://movie_user:CHANGE_ME_MOVIE_PASSWORD@postgres-movie-service:5432/movies_db"
  
  # Booking Service Database
  BOOKING_DATABASE_URL: "postgresql+asyncpg://booking_user:CHANGE_ME_BOOKING_PASSWORD@postgres-booking-service:5432/bookings_db"
  
  # Payment Service Database
  PAYMENT_DATABASE_URL: "postgresql+asyncpg://payment_user:CHANGE_ME_PAYMENT_PASSWORD@postgres-payment-service:5432/payments_db"
  
  # Notification Service Database
  NOTIFICATION_DATABASE_URL: "postgresql+asyncpg://notification_user:CHANGE_ME_NOTIFICATION_PASSWORD@postgres-notification-service:5432/notifications_db"
  
  # Redis Password
  REDIS_PASSWORD: "CHANGE_ME_REDIS_PASSWORD"
  REDIS_URL: "redis://:CHANGE_ME_REDIS_PASSWORD@redis-service:6379"
  
  # RabbitMQ Credentials
  RABBITMQ_USER: "admin"
  RABBITMQ_PASSWORD: "CHANGE_ME_RABBITMQ_PASSWORD"
  RABBITMQ_URL: "amqp://admin:CHANGE_ME_RABBITMQ_PASSWORD@rabbitmq-service:5672/"
  
  # JWT Secret Keys (RS256)
  # Generate with: openssl rand -hex 32
  SECRET_KEY: "CHANGE_ME_GENERATE_256_BIT_SECRET_WITH_OPENSSL"
  
  # Service-to-Service Authentication
  SERVICE_AUTH_TOKEN: "CHANGE_ME_INTERNAL_SERVICE_TOKEN"
  
  # SMTP Configuration (Email)
  SMTP_HOST: "smtp.gmail.com"
  SMTP_PORT: "587"
  SMTP_USER: "your-email@example.com"
  SMTP_PASSWORD: "CHANGE_ME_APP_SPECIFIC_PASSWORD"
---
# Docker Registry Secret (for private registries)
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry-secret
  namespace: movie-booking
type: kubernetes.io/dockerconfigjson
data:
  # Base64 encoded docker config.json
  # echo '{"auths":{"registry.example.com":{"username":"user","password":"pass"}}}' | base64
  .dockerconfigjson: e30=
